/* Mobilno prijazen layout: stage NE more požreti zaslona. Kontrole so vedno vidne. */

*{ box-sizing:border-box; margin:0; padding:0; }
html,body{ height:100%; }

body{
  background:#0b0f14;
  color:#fff;
  font-family: system-ui, -apple-system, "Segoe UI Emoji", "Apple Color Emoji";
  display:flex;
  justify-content:center;
}

/* Aplikacija je visok zaslon (100dvh) in ima 2 dela: stage + controls */
.app{
  width:100%;
  max-width:440px;
  height:100dvh;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:10px;

  /* iPhone safe area */
  padding-bottom: calc(10px + env(safe-area-inset-bottom));
  padding-top: calc(10px + env(safe-area-inset-top));
}

/* ODER 9:16, ampak omejen po višini */
.stage{
  position:relative;
  width:100%;
  aspect-ratio: 9/16;
  background:#000;
  border-radius:18px;
  overflow:hidden;
  box-shadow: 0 14px 50px rgba(0,0,0,.45);

  /* KLJUČ: stage ne sme biti višji od ~55% zaslona */
  max-height: 55dvh;
  flex: 0 0 auto;
}

/* video */
#video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transform: scaleX(-1); /* selfie */
}

/* overlay */
.overlay{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  pointer-events:none;
  user-select:none;
}

/* nalepke */
.stickers-layer{
  position:absolute;
  inset:0;
  touch-action:none;
}

/* sticker */
.sticker{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%) rotate(0deg) scale(1);
  transform-origin:center center;
  font-size:64px;
  line-height:1;
  user-select:none;
  touch-action:none;
  filter: drop-shadow(0 10px 20px rgba(0,0,0,.35));
}
.sticker.selected{
  outline:2px dashed rgba(77,163,255,.95);
  outline-offset:6px;
  border-radius:14px;
}

/* controls zavzame preostanek višine in se lahko scrolla */
.controls{
  flex: 1 1 auto;
  min-height: 0;               /* omogoči scroll znotraj flex */
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  display:grid;
  gap:8px;
  padding-bottom: 6px;
}

/* gumbi */
.btn{
  padding:12px;
  border:none;
  border-radius:14px;
  background:#1f2937;
  color:#fff;
  font-size:16px;
  font-weight:800;
}
.btn.primary{ background:#2563eb; }
.btn.danger{ background:#7f1d1d; }

.row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:8px;
}

.help{
  font-size:12px;
  color:#b6c3dd;
  line-height:1.35;
  padding:2px 2px 6px;
}

/* emojis grid */
.emojis{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}
.emojis button{
  width:48px;
  height:48px;
  border-radius:14px;
  border:none;
  background:#111827;
  color:#fff;
  font-size:22px;
}

/* zelo majhni telefoni */
@media (max-height: 720px){
  .stage{ max-height: 48dvh; }
  .emojis button{ width:44px; height:44px; }
}
